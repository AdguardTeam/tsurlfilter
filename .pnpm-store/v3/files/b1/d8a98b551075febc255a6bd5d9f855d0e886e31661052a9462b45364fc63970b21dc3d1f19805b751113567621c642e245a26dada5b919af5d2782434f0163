{"version":3,"file":"noMultiAsterisks.js","names":["middleAsterisksBlockWS","middleAsterisksNoBlockWS","endAsterisksSingleLineBlockWS","endAsterisksMultipleLineBlockWS","endAsterisksSingleLineNoBlockWS","endAsterisksMultipleLineNoBlockWS","iterateJsdoc","context","jsdoc","utils","allowWhitespace","preventAtEnd","preventAtMiddleLines","options","middleAsterisks","source","some","tokens","number","delimiter","tag","name","type","description","end","postDelimiter","test","fix","replace","reportJSDoc","line","isSingleLineBlock","delim","endAsterisks","endingAsterisksAndSpaces","match","trim","endFix","iterateAllJsdocs","meta","docs","url","fixable","schema","additionalProperies","properties"],"sources":["../../src/rules/noMultiAsterisks.js"],"sourcesContent":["import iterateJsdoc from '../iterateJsdoc';\n\nconst middleAsterisksBlockWS = /^([\\t ]|\\*(?!\\*))+/u;\nconst middleAsterisksNoBlockWS = /^\\*+/u;\n\nconst endAsterisksSingleLineBlockWS = /\\*((?:\\*|(?: |\\t))*)\\*$/u;\nconst endAsterisksMultipleLineBlockWS = /((?:\\*|(?: |\\t))*)\\*$/u;\n\nconst endAsterisksSingleLineNoBlockWS = /\\*(\\**)\\*$/u;\nconst endAsterisksMultipleLineNoBlockWS = /(\\**)\\*$/u;\n\nexport default iterateJsdoc(({\n  context,\n  jsdoc,\n  utils,\n}) => {\n  const {\n    allowWhitespace = false,\n    preventAtEnd = true,\n    preventAtMiddleLines = true,\n  } = context.options[0] || {};\n\n  const middleAsterisks = allowWhitespace ? middleAsterisksNoBlockWS : middleAsterisksBlockWS;\n\n  // eslint-disable-next-line complexity -- Todo\n  jsdoc.source.some(({\n    tokens,\n    number,\n  }) => {\n    const {\n      delimiter,\n      tag,\n      name,\n      type,\n      description,\n      end,\n      postDelimiter,\n    } = tokens;\n\n    if (\n      preventAtMiddleLines &&\n      !end && !tag && !type && !name &&\n      (\n        !allowWhitespace && middleAsterisks.test(description) ||\n        allowWhitespace && middleAsterisks.test(postDelimiter + description)\n      )\n    ) {\n      // console.log('description', JSON.stringify(description));\n      const fix = () => {\n        tokens.description = description.replace(middleAsterisks, '');\n      };\n\n      utils.reportJSDoc(\n        'Should be no multiple asterisks on middle lines.',\n        {\n          line: number,\n        },\n        fix,\n        true,\n      );\n\n      return true;\n    }\n\n    if (!preventAtEnd || !end) {\n      return false;\n    }\n\n    const isSingleLineBlock = delimiter === '/**';\n    const delim = isSingleLineBlock ? '*' : delimiter;\n    let endAsterisks;\n    if (allowWhitespace) {\n      endAsterisks = isSingleLineBlock ? endAsterisksSingleLineNoBlockWS : endAsterisksMultipleLineNoBlockWS;\n    } else {\n      endAsterisks = isSingleLineBlock ? endAsterisksSingleLineBlockWS : endAsterisksMultipleLineBlockWS;\n    }\n\n    const endingAsterisksAndSpaces = (\n      allowWhitespace ? postDelimiter + description + delim : description + delim\n    ).match(\n      endAsterisks,\n    );\n\n    if (\n      !endingAsterisksAndSpaces ||\n      !isSingleLineBlock && endingAsterisksAndSpaces[1] && !endingAsterisksAndSpaces[1].trim()\n    ) {\n      return false;\n    }\n\n    const endFix = () => {\n      if (!isSingleLineBlock) {\n        tokens.delimiter = '';\n      }\n\n      tokens.description = (description + delim).replace(endAsterisks, '');\n    };\n\n    utils.reportJSDoc(\n      'Should be no multiple asterisks on end lines.',\n      {\n        line: number,\n      },\n      endFix,\n      true,\n    );\n\n    return true;\n  });\n}, {\n  iterateAllJsdocs: true,\n  meta: {\n    docs: {\n      description: '',\n      url: 'https://github.com/gajus/eslint-plugin-jsdoc#eslint-plugin-jsdoc-rules-no-multi-asterisks',\n    },\n    fixable: 'code',\n    schema: [\n      {\n        additionalProperies: false,\n        properties: {\n          allowWhitespace: {\n            type: 'boolean',\n          },\n          preventAtEnd: {\n            type: 'boolean',\n          },\n          preventAtMiddleLines: {\n            type: 'boolean',\n          },\n        },\n        type: 'object',\n      },\n    ],\n    type: 'suggestion',\n  },\n});\n"],"mappings":"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"}