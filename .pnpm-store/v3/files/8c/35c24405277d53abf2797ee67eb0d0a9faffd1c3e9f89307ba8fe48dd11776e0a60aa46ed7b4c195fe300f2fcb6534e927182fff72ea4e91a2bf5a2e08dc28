{"version":3,"file":"requireThrows.js","names":["canSkip","utils","hasATag","avoidDocs","iterateJsdoc","report","tagName","getPreferredTagName","tags","getTags","iteratingFunction","isIteratingFunction","tag","missingThrowsTag","shouldReport","type","trim","hasThrowValue","contextDefaults","meta","docs","description","url","schema","additionalProperties","properties","contexts","items","anyOf","comment","context","exemptedBy"],"sources":["../../src/rules/requireThrows.js"],"sourcesContent":["import iterateJsdoc from '../iterateJsdoc';\n\n/**\n * We can skip checking for a throws value, in case the documentation is inherited\n * or the method is either a constructor or an abstract method.\n *\n * @param {*} utils a reference to the utils which are used to probe if a tag is present or not.\n * @returns {boolean} true in case deep checking can be skipped; otherwise false.\n */\nconst canSkip = (utils) => {\n  return utils.hasATag([\n    // inheritdoc implies that all documentation is inherited\n    // see https://jsdoc.app/tags-inheritdoc.html\n    //\n    // Abstract methods are by definition incomplete,\n    // so it is not necessary to document that they throw an error.\n    'abstract',\n    'virtual',\n\n    // The designated type can itself document `@throws`\n    'type',\n  ]) ||\n    utils.avoidDocs();\n};\n\nexport default iterateJsdoc(({\n  report,\n  utils,\n}) => {\n  // A preflight check. We do not need to run a deep check for abstract\n  //  functions.\n  if (canSkip(utils)) {\n    return;\n  }\n\n  const tagName = utils.getPreferredTagName({\n    tagName: 'throws',\n  });\n  if (!tagName) {\n    return;\n  }\n\n  const tags = utils.getTags(tagName);\n  const iteratingFunction = utils.isIteratingFunction();\n\n  // In case the code returns something, we expect a return value in JSDoc.\n  const [\n    tag,\n  ] = tags;\n  const missingThrowsTag = typeof tag === 'undefined' || tag === null;\n\n  const shouldReport = () => {\n    if (!missingThrowsTag) {\n      if (tag.type.trim() === 'never' && iteratingFunction && utils.hasThrowValue()) {\n        report(`JSDoc @${tagName} declaration set to \"never\" but throw value found.`);\n      }\n\n      return false;\n    }\n\n    return iteratingFunction && utils.hasThrowValue();\n  };\n\n  if (shouldReport()) {\n    report(`Missing JSDoc @${tagName} declaration.`);\n  }\n}, {\n  contextDefaults: true,\n  meta: {\n    docs: {\n      description: 'Requires that throw statements are documented.',\n      url: 'https://github.com/gajus/eslint-plugin-jsdoc#eslint-plugin-jsdoc-rules-require-throws',\n    },\n    schema: [\n      {\n        additionalProperties: false,\n        properties: {\n          contexts: {\n            items: {\n              anyOf: [\n                {\n                  type: 'string',\n                },\n                {\n                  additionalProperties: false,\n                  properties: {\n                    comment: {\n                      type: 'string',\n                    },\n                    context: {\n                      type: 'string',\n                    },\n                  },\n                  type: 'object',\n                },\n              ],\n            },\n            type: 'array',\n          },\n          exemptedBy: {\n            items: {\n              type: 'string',\n            },\n            type: 'array',\n          },\n        },\n        type: 'object',\n      },\n    ],\n    type: 'suggestion',\n  },\n});\n"],"mappings":";;;;;;;AAAA;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,OAAO,GAAIC,KAAD,IAAW;EACzB,OAAOA,KAAK,CAACC,OAAN,CAAc,CACnB;EACA;EACA;EACA;EACA;EACA,UANmB,EAOnB,SAPmB,EASnB;EACA,MAVmB,CAAd,KAYLD,KAAK,CAACE,SAAN,EAZF;AAaD,CAdD;;eAgBe,IAAAC,qBAAA,EAAa,CAAC;EAC3BC,MAD2B;EAE3BJ;AAF2B,CAAD,KAGtB;EACJ;EACA;EACA,IAAID,OAAO,CAACC,KAAD,CAAX,EAAoB;IAClB;EACD;;EAED,MAAMK,OAAO,GAAGL,KAAK,CAACM,mBAAN,CAA0B;IACxCD,OAAO,EAAE;EAD+B,CAA1B,CAAhB;;EAGA,IAAI,CAACA,OAAL,EAAc;IACZ;EACD;;EAED,MAAME,IAAI,GAAGP,KAAK,CAACQ,OAAN,CAAcH,OAAd,CAAb;EACA,MAAMI,iBAAiB,GAAGT,KAAK,CAACU,mBAAN,EAA1B,CAfI,CAiBJ;;EACA,MAAM,CACJC,GADI,IAEFJ,IAFJ;EAGA,MAAMK,gBAAgB,GAAG,OAAOD,GAAP,KAAe,WAAf,IAA8BA,GAAG,KAAK,IAA/D;;EAEA,MAAME,YAAY,GAAG,MAAM;IACzB,IAAI,CAACD,gBAAL,EAAuB;MACrB,IAAID,GAAG,CAACG,IAAJ,CAASC,IAAT,OAAoB,OAApB,IAA+BN,iBAA/B,IAAoDT,KAAK,CAACgB,aAAN,EAAxD,EAA+E;QAC7EZ,MAAM,CAAE,UAASC,OAAQ,oDAAnB,CAAN;MACD;;MAED,OAAO,KAAP;IACD;;IAED,OAAOI,iBAAiB,IAAIT,KAAK,CAACgB,aAAN,EAA5B;EACD,CAVD;;EAYA,IAAIH,YAAY,EAAhB,EAAoB;IAClBT,MAAM,CAAE,kBAAiBC,OAAQ,eAA3B,CAAN;EACD;AACF,CAzCc,EAyCZ;EACDY,eAAe,EAAE,IADhB;EAEDC,IAAI,EAAE;IACJC,IAAI,EAAE;MACJC,WAAW,EAAE,gDADT;MAEJC,GAAG,EAAE;IAFD,CADF;IAKJC,MAAM,EAAE,CACN;MACEC,oBAAoB,EAAE,KADxB;MAEEC,UAAU,EAAE;QACVC,QAAQ,EAAE;UACRC,KAAK,EAAE;YACLC,KAAK,EAAE,CACL;cACEb,IAAI,EAAE;YADR,CADK,EAIL;cACES,oBAAoB,EAAE,KADxB;cAEEC,UAAU,EAAE;gBACVI,OAAO,EAAE;kBACPd,IAAI,EAAE;gBADC,CADC;gBAIVe,OAAO,EAAE;kBACPf,IAAI,EAAE;gBADC;cAJC,CAFd;cAUEA,IAAI,EAAE;YAVR,CAJK;UADF,CADC;UAoBRA,IAAI,EAAE;QApBE,CADA;QAuBVgB,UAAU,EAAE;UACVJ,KAAK,EAAE;YACLZ,IAAI,EAAE;UADD,CADG;UAIVA,IAAI,EAAE;QAJI;MAvBF,CAFd;MAgCEA,IAAI,EAAE;IAhCR,CADM,CALJ;IAyCJA,IAAI,EAAE;EAzCF;AAFL,CAzCY,C"}