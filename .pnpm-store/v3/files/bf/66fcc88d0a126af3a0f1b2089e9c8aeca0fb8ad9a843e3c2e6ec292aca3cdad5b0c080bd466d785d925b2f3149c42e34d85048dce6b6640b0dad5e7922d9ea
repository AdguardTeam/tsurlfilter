{"version":3,"file":"requireJsdoc.js","names":["OPTIONS_SCHEMA","additionalProperties","properties","checkConstructors","default","type","checkGetters","anyOf","enum","checkSetters","contexts","items","context","inlineCommentBlock","minLineCount","enableFixer","exemptEmptyConstructors","exemptEmptyFunctions","fixerMessage","publicOnly","oneOf","ancestorsOnly","cjs","esm","window","require","ArrowFunctionExpression","ClassDeclaration","ClassExpression","FunctionDeclaration","FunctionExpression","MethodDefinition","getOption","baseObject","option","key","options","getOptions","undefined","baseObj","prop","Object","keys","opt","create","sourceCode","getSourceCode","settings","getSettings","requireOption","checkJsDoc","info","handler","node","some","count","underMinLine","getText","match","length","contextMinLineCount","find","ctxt","selector","jsDocNode","getJSDocComment","jsdocUtils","exemptSpeciaMethods","tags","isFunctionContext","isConstructor","functionParameterNames","getFunctionParameterNames","hasReturnValue","fix","fixer","lines","minLines","maxLines","baseNode","getReducedASTNode","decorator","getDecorator","indent","getIndent","text","loc","start","column","insertion","repeat","slice","insertTextBefore","report","end","line","messageId","Boolean","initModuleExports","initWindow","exported","exportParser","isUncommentedExport","hasOption","getContextObject","enforcedContexts","includes","parent","value","meta","docs","category","description","recommended","url","fixable","messages","missingJsDoc","schema"],"sources":["../../src/rules/requireJsdoc.js"],"sourcesContent":["import {\n  getJSDocComment,\n  getReducedASTNode,\n  getDecorator,\n} from '@es-joy/jsdoccomment';\nimport exportParser from '../exportParser';\nimport {\n  getSettings,\n} from '../iterateJsdoc';\nimport jsdocUtils from '../jsdocUtils';\n\nconst OPTIONS_SCHEMA = {\n  additionalProperties: false,\n  properties: {\n    checkConstructors: {\n      default: true,\n      type: 'boolean',\n    },\n    checkGetters: {\n      anyOf: [\n        {\n          type: 'boolean',\n        },\n        {\n          enum: [\n            'no-setter',\n          ],\n          type: 'string',\n        },\n      ],\n      default: true,\n    },\n    checkSetters: {\n      anyOf: [\n        {\n          type: 'boolean',\n        },\n        {\n          enum: [\n            'no-getter',\n          ],\n          type: 'string',\n        },\n      ],\n      default: true,\n    },\n    contexts: {\n      items: {\n        anyOf: [\n          {\n            type: 'string',\n          },\n          {\n            additionalProperties: false,\n            properties: {\n              context: {\n                type: 'string',\n              },\n              inlineCommentBlock: {\n                type: 'boolean',\n              },\n              minLineCount: {\n                type: 'integer',\n              },\n            },\n            type: 'object',\n          },\n        ],\n      },\n      type: 'array',\n    },\n    enableFixer: {\n      default: true,\n      type: 'boolean',\n    },\n    exemptEmptyConstructors: {\n      default: false,\n      type: 'boolean',\n    },\n    exemptEmptyFunctions: {\n      default: false,\n      type: 'boolean',\n    },\n    fixerMessage: {\n      default: '',\n      type: 'string',\n    },\n    minLineCount: {\n      type: 'integer',\n    },\n    publicOnly: {\n      oneOf: [\n        {\n          default: false,\n          type: 'boolean',\n        },\n        {\n          additionalProperties: false,\n          default: {},\n          properties: {\n            ancestorsOnly: {\n              type: 'boolean',\n            },\n            cjs: {\n              type: 'boolean',\n            },\n            esm: {\n              type: 'boolean',\n            },\n            window: {\n              type: 'boolean',\n            },\n          },\n          type: 'object',\n        },\n      ],\n    },\n    require: {\n      additionalProperties: false,\n      default: {},\n      properties: {\n        ArrowFunctionExpression: {\n          default: false,\n          type: 'boolean',\n        },\n        ClassDeclaration: {\n          default: false,\n          type: 'boolean',\n        },\n        ClassExpression: {\n          default: false,\n          type: 'boolean',\n        },\n        FunctionDeclaration: {\n          default: true,\n          type: 'boolean',\n        },\n        FunctionExpression: {\n          default: false,\n          type: 'boolean',\n        },\n        MethodDefinition: {\n          default: false,\n          type: 'boolean',\n        },\n      },\n      type: 'object',\n    },\n  },\n  type: 'object',\n};\n\nconst getOption = (context, baseObject, option, key) => {\n  if (context.options[0] && option in context.options[0] &&\n    // Todo: boolean shouldn't be returning property, but tests currently require\n    (typeof context.options[0][option] === 'boolean' ||\n    key in context.options[0][option])\n  ) {\n    return context.options[0][option][key];\n  }\n\n  return baseObject.properties[key].default;\n};\n\nconst getOptions = (context) => {\n  const {\n    publicOnly,\n    contexts = [],\n    exemptEmptyConstructors = true,\n    exemptEmptyFunctions = false,\n    enableFixer = true,\n    fixerMessage = '',\n    minLineCount = undefined,\n  } = context.options[0] || {};\n\n  return {\n    contexts,\n    enableFixer,\n    exemptEmptyConstructors,\n    exemptEmptyFunctions,\n    fixerMessage,\n    minLineCount,\n    publicOnly: ((baseObj) => {\n      if (!publicOnly) {\n        return false;\n      }\n\n      const properties = {};\n      for (const prop of Object.keys(baseObj.properties)) {\n        const opt = getOption(context, baseObj, 'publicOnly', prop);\n        properties[prop] = opt;\n      }\n\n      return properties;\n    })(OPTIONS_SCHEMA.properties.publicOnly.oneOf[1]),\n    require: ((baseObj) => {\n      const properties = {};\n      for (const prop of Object.keys(baseObj.properties)) {\n        const opt = getOption(context, baseObj, 'require', prop);\n        properties[prop] = opt;\n      }\n\n      return properties;\n    })(OPTIONS_SCHEMA.properties.require),\n  };\n};\n\nexport default {\n  create (context) {\n    const sourceCode = context.getSourceCode();\n    const settings = getSettings(context);\n    if (!settings) {\n      return {};\n    }\n\n    const {\n      require: requireOption,\n      contexts,\n      publicOnly,\n      exemptEmptyFunctions,\n      exemptEmptyConstructors,\n      enableFixer,\n      fixerMessage,\n      minLineCount,\n    } = getOptions(context);\n\n    const checkJsDoc = (info, handler, node) => {\n      if (\n        // Optimize\n        minLineCount !== undefined || contexts.some(({\n          minLineCount: count,\n        }) => {\n          return count !== undefined;\n        })\n      ) {\n        const underMinLine = (count) => {\n          return count !== undefined && count >\n            (sourceCode.getText(node).match(/\\n/gu)?.length ?? 0) + 1;\n        };\n\n        if (underMinLine(minLineCount)) {\n          return;\n        }\n\n        const {\n          minLineCount: contextMinLineCount,\n        } = contexts.find(({\n          context: ctxt,\n        }) => {\n          return ctxt === (info.selector || node.type);\n        }) || {};\n        if (underMinLine(contextMinLineCount)) {\n          return;\n        }\n      }\n\n      const jsDocNode = getJSDocComment(sourceCode, node, settings);\n\n      if (jsDocNode) {\n        return;\n      }\n\n      // For those who have options configured against ANY constructors (or\n      //  setters or getters) being reported\n      if (jsdocUtils.exemptSpeciaMethods(\n        {\n          tags: [],\n        }, node, context, [\n          OPTIONS_SCHEMA,\n        ],\n      )) {\n        return;\n      }\n\n      if (\n        // Avoid reporting param-less, return-less functions (when\n        //  `exemptEmptyFunctions` option is set)\n        exemptEmptyFunctions && info.isFunctionContext ||\n\n        // Avoid reporting  param-less, return-less constructor methods (when\n        //  `exemptEmptyConstructors` option is set)\n        exemptEmptyConstructors && jsdocUtils.isConstructor(node)\n      ) {\n        const functionParameterNames = jsdocUtils.getFunctionParameterNames(node);\n        if (!functionParameterNames.length && !jsdocUtils.hasReturnValue(node)) {\n          return;\n        }\n      }\n\n      const fix = (fixer) => {\n        // Default to one line break if the `minLines`/`maxLines` settings allow\n        const lines = settings.minLines === 0 && settings.maxLines >= 1 ? 1 : settings.minLines;\n        let baseNode = getReducedASTNode(node, sourceCode);\n\n        const decorator = getDecorator(baseNode);\n        if (decorator) {\n          baseNode = decorator;\n        }\n\n        const indent = jsdocUtils.getIndent({\n          text: sourceCode.getText(\n            baseNode,\n            baseNode.loc.start.column,\n          ),\n        });\n\n        const {\n          inlineCommentBlock,\n        } = contexts.find(({\n          context: ctxt,\n        }) => {\n          return ctxt === node.type;\n        }) || {};\n        const insertion = (inlineCommentBlock ?\n          `/** ${fixerMessage}` :\n          `/**\\n${indent}*${fixerMessage}\\n${indent}`) +\n            `*/${'\\n'.repeat(lines)}${indent.slice(0, -1)}`;\n\n        return fixer.insertTextBefore(baseNode, insertion);\n      };\n\n      const report = () => {\n        const {\n          start,\n        } = node.loc;\n        const loc = {\n          end: {\n            column: 0,\n            line: start.line + 1,\n          },\n          start: node.loc.start,\n        };\n        context.report({\n          fix: enableFixer ? fix : null,\n          loc,\n          messageId: 'missingJsDoc',\n          node,\n        });\n      };\n\n      if (publicOnly) {\n        const opt = {\n          ancestorsOnly: Boolean(publicOnly?.ancestorsOnly ?? false),\n          esm: Boolean(publicOnly?.esm ?? true),\n          initModuleExports: Boolean(publicOnly?.cjs ?? true),\n          initWindow: Boolean(publicOnly?.window ?? false),\n        };\n        const exported = exportParser.isUncommentedExport(node, sourceCode, opt, settings);\n\n        if (exported) {\n          report();\n        }\n      } else {\n        report();\n      }\n    };\n\n    const hasOption = (prop) => {\n      return requireOption[prop] || contexts.some((ctxt) => {\n        return typeof ctxt === 'object' ? ctxt.context === prop : ctxt === prop;\n      });\n    };\n\n    return {\n      ...jsdocUtils.getContextObject(\n        jsdocUtils.enforcedContexts(context, []),\n        checkJsDoc,\n      ),\n      ArrowFunctionExpression (node) {\n        if (!hasOption('ArrowFunctionExpression')) {\n          return;\n        }\n\n        if (\n          [\n            'VariableDeclarator', 'AssignmentExpression', 'ExportDefaultDeclaration',\n          ].includes(node.parent.type) ||\n          [\n            'Property', 'ObjectProperty', 'ClassProperty', 'PropertyDefinition',\n          ].includes(node.parent.type) && node === node.parent.value\n        ) {\n          checkJsDoc({\n            isFunctionContext: true,\n          }, null, node);\n        }\n      },\n\n      ClassDeclaration (node) {\n        if (!hasOption('ClassDeclaration')) {\n          return;\n        }\n\n        checkJsDoc({\n          isFunctionContext: false,\n        }, null, node);\n      },\n\n      ClassExpression (node) {\n        if (!hasOption('ClassExpression')) {\n          return;\n        }\n\n        checkJsDoc({\n          isFunctionContext: false,\n        }, null, node);\n      },\n\n      FunctionDeclaration (node) {\n        if (!hasOption('FunctionDeclaration')) {\n          return;\n        }\n\n        checkJsDoc({\n          isFunctionContext: true,\n        }, null, node);\n      },\n\n      FunctionExpression (node) {\n        if (!hasOption('FunctionExpression')) {\n          return;\n        }\n\n        if (\n          [\n            'VariableDeclarator', 'AssignmentExpression', 'ExportDefaultDeclaration',\n          ].includes(node.parent.type) ||\n          [\n            'Property', 'ObjectProperty', 'ClassProperty', 'PropertyDefinition',\n          ].includes(node.parent.type) && node === node.parent.value\n        ) {\n          checkJsDoc({\n            isFunctionContext: true,\n          }, null, node);\n        }\n      },\n\n      MethodDefinition (node) {\n        if (!hasOption('MethodDefinition')) {\n          return;\n        }\n\n        checkJsDoc({\n          isFunctionContext: true,\n          selector: 'MethodDefinition',\n        }, null, node.value);\n      },\n    };\n  },\n  meta: {\n    docs: {\n      category: 'Stylistic Issues',\n      description: 'Require JSDoc comments',\n      recommended: 'true',\n      url: 'https://github.com/gajus/eslint-plugin-jsdoc#eslint-plugin-jsdoc-rules-require-jsdoc',\n    },\n\n    fixable: 'code',\n\n    messages: {\n      missingJsDoc: 'Missing JSDoc comment.',\n    },\n\n    schema: [\n      OPTIONS_SCHEMA,\n    ],\n\n    type: 'suggestion',\n  },\n};\n"],"mappings":"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"}